<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.1, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
  <title>åæ–‡è¡¨è¾¾ç²¾è¿›å¡</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.cn/css2?family=Noto+Serif+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    /* æ‰€æœ‰CSSæ ·å¼ä¿æŒä¸å˜ï¼Œé™¤äº†ä»¥ä¸‹ä¿®æ”¹ */
    :root {
      --primary: #667eea;
      --primary-dark: #5a67d8;
      --primary-light: #a3bffa;
      --secondary: #ed8936;
      --accent: #48bb78;
      --text-primary: #2d3748;
      --text-secondary: #718096;
      --bg-primary: #ffffff;
      --bg-secondary: #f7fafc;
      /* ä¿®æ”¹èƒŒæ™¯æ¸å˜ï¼Œä¸"é‡ç”Ÿè‹±è¯­"å®Œå…¨ä¸€è‡´ */
      --bg-gradient: linear-gradient(135deg, #5A3C80 0%, #4A6FA5 50%, #6A4C93 100%);
      --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.07), 0 1px 3px rgba(0,0,0,0.06);
      --shadow-lg: 0 10px 15px rgba(0,0,0,0.1), 0 4px 6px rgba(0,0,0,0.05);
      --shadow-xl: 0 20px 25px rgba(0,0,0,0.15), 0 10px 10px rgba(0,0,0,0.04);
      --radius: 24px;
      --radius-sm: 16px;
      --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      --english-color: #4A1D96;
      --dark-blue: #1e3a8a;
      --light-blue: #3b82f6;
      --error-color: #dc2626;
      --correct-color: #059669;
      --dark-green: #047857;
    }

    /* æ–°å¢çš„CSSè§„åˆ™å— */
    .copyright-icon {
      color: rgba(255, 255, 255, 0.85);
    }

    .dropdown {
      background: rgba(163, 191, 250, 0.95); /* æ¢å¤åŸæ¥çš„ä¸‹æ‹‰åˆ—è¡¨èƒŒæ™¯è‰² */
    }

    #card {
      background: 
        linear-gradient(
          90deg, 
          #5A3C80 0%, 
          #4A6FA5 20%, 
          #6A4C93 50%, 
          #7c6eea 80%, 
          #5A3C80 100%
        ) top / 100% 12px no-repeat,
        rgba(255, 255, 255, 0.96) 0% 12px / 100% calc(100% - 12px) no-repeat;
    }

    /* ä¿®å¤æ”¶è—æ˜Ÿæ ‡é¢œè‰² - ä½¿ç”¨æ›´æ˜æ˜¾çš„è“è‰² */
    .card-star {
      color: #4A6FA5; /* ä½¿ç”¨èƒŒæ™¯æ¸å˜ä¸­çš„è“è‰²ï¼Œæ›´æ˜æ˜¾ */
      filter: drop-shadow(0 0 15px rgba(74, 111, 165, 0.8));
    }

    /* ä¿®å¤ç‰ˆæƒå¼¹çª—èƒŒæ™¯è‰² */
    .creator-content {
      background: linear-gradient(135deg, #5A3C80 0%, #4A6FA5 50%, #6A4C93 100%);
    }

    /* ä¿®å¤è‡ªåŠ¨æ’­æ”¾ä¸‹æ‹‰é€‰é¡¹é¢œè‰² - å»æ‰æ–¹å½¢èƒŒæ™¯æ¡†ï¼Œç®€åŒ–æ ·å¼ */
    .dropdown-option {
      background: transparent !important; /* å»æ‰èƒŒæ™¯æ¡† */
      color: white !important; /* ç™½è‰²æ–‡å­— */
      border: none !important; /* å»æ‰è¾¹æ¡† */
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      text-align: center;
      font-family: 'Arial', sans-serif;
      padding: 8px 12px;
      border-radius: 6px;
    }

    .dropdown-option:hover,
    .dropdown-option.active {
      background: linear-gradient(135deg, #5A3C80 0%, #4A6FA5 100%) !important; /* ä½¿ç”¨æ¸å˜èƒŒæ™¯ */
      color: white !important;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
    }

    html {
      height: 100%;
      width: 100%;
      overflow: auto;
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
      -webkit-overflow-scrolling: touch;
    }

    body {
      min-height: 100%;
      width: 100%;
      font-family: 'Arial', 'Noto Serif SC', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-gradient);
      color: var(--text-primary);
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow: auto;
      touch-action: manipulation;
      padding: 0;
      -webkit-text-size-adjust: 100%;
      text-size-adjust: 100%;
      -webkit-overflow-scrolling: touch;
      position: relative;
    }

    /* å›ºå®šçš„èƒŒæ™¯å±‚ - é˜²æ­¢ç¼©æ”¾æ—¶å˜ç™½ */
    .background-fixed {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        linear-gradient(135deg, #5A3C80 0%, #4A6FA5 50%, #6A4C93 100%),
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
      z-index: -2;
      pointer-events: none;
    }

    .app-container {
      width: 100%;
      max-width: 480px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 16px;
      gap: 16px;
      min-height: auto;
      height: auto;
      flex: 0 1 auto;
      margin: auto;
      position: relative;
      touch-action: pan-y pinch-zoom;
      transform-origin: center center;
      transition: transform 0.3s ease;
      background: transparent;
    }

    .header {
      text-align: center;
      width: 100%;
      padding: 8px 0;
      margin-bottom: 4px;
      transition: var(--transition);
    }

    .header-content {
      padding: 8px;
    }

    .logo {
      font-size: 28px;
      font-weight: 700;
      background: linear-gradient(135deg, #ffffff 0%, #f0f4ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
      font-family: 'Noto Serif SC', serif;
    }

    .subtitle {
      font-size: 13px;
      color: rgba(255, 255, 255, 0.9);
      font-family: 'Noto Serif SC', serif;
      line-height: 1.4;
    }

    .dataset-selector {
      width: 100%;
      display: flex;
      gap: 8px;
      margin-bottom: 6px;
    }

    .nav-btn {
      flex: 1;
      height: 46px;
      background: rgba(255, 255, 255, 0.18);
      backdrop-filter: blur(12px);
      border: none;
      border-radius: var(--radius-sm);
      color: white;
      font-size: 20px;
      font-weight: 400;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      box-shadow: var(--shadow-md);
      font-family: 'Noto Serif SC', serif;
    }

    .nav-btn.active {
      background: rgba(255, 255, 255, 0.35);
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
    }

    .nav-btn:active {
      transform: translateY(0);
    }

    .card-container {
      width: 100%;
      height: 340px;
      touch-action: pan-y pinch-zoom;
      position: relative;
      margin: 8px 0;
    }

    #card {
      width: 100%;
      height: 100%;
      backdrop-filter: blur(25px);
      border-radius: var(--radius);
      padding: 28px 24px;
      text-align: center;
      box-shadow: var(--shadow-xl);
      position: relative;
      transition: var(--transition);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: visible;
      border: 1px solid rgba(255, 255, 255, 0.4);
      cursor: pointer;
      touch-action: pan-y pinch-zoom;
    }

    #card:active {
      transform: translateY(-3px);
      box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.2);
    }

    .card-click-left, .card-click-right {
      position: absolute;
      top: 0;
      height: 100%;
      width: 50%;
      z-index: 5;
    }

    .card-click-left {
      left: 0;
    }

    .card-click-right {
      right: 0;
    }

    .card-star {
      position: absolute;
      top: 20px;
      left: 20px;
      font-size: 24px;
      padding: 8px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.9);
      box-shadow: var(--shadow-md);
      pointer-events: none;
      z-index: 10;
    }

    #card-text {
      font-size: 28px;
      line-height: 1.4;
      word-break: break-word;
      font-weight: 300;
      color: var(--dark-blue);
      white-space: pre-line;
      font-family: 'Noto Serif SC', serif;
      -webkit-user-select: text;
      user-select: text;
      max-width: 100%;
    }

    .card-image {
      max-width: 40%;
      max-height: 110px;
      border-radius: 10px;
      margin-bottom: 4px;
      border: 3px solid #e2e8f0;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      margin-top: 10px;
      position: relative;
      z-index: 2;
    }

    .divider {
      width: 85%;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--primary-light), transparent);
      margin: 20px 0;
      border-radius: 2px;
    }

    .vertical-divider {
      width: 2px;
      height: 100px;
      background: linear-gradient(to bottom, transparent, var(--primary-light), transparent);
      margin: 0 8px;
      border-radius: 2px;
      position: relative;
      z-index: 1;
    }

    .correct-character {
      font-size: 80px;
      font-weight: 700;
      color: var(--dark-green);
      text-shadow: 0 4px 12px rgba(0,0,0,0.2);
      font-family: 'Noto Serif SC', serif;
      margin-right: 16px;
      position: relative;
      z-index: 2;
      margin-bottom: 4px;
    }

    .typo-back-container {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      gap: 4px;
      position: relative;
    }

    /* ç¡®ä¿ä¸¤ä¸ªå®¹å™¨çš„é«˜åº¦ä¸€è‡´ä¸”æ ‡ç­¾å¯¹é½ */
    .typo-image-container, .typo-character-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100%;
      position: relative;
      min-height: 200px;
    }

    /* ç¡®ä¿å›¾ç‰‡å’Œæ–‡å­—åŒºåŸŸæœ‰å›ºå®šé«˜åº¦ */
    .typo-image-container {
      padding-top: 10px;
    }

    .typo-character-container {
      padding-top: 10px;
      margin-left: -8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ä¸“é—¨é’ˆå¯¹é”™åˆ«å­—å›¾ç‰‡è¿›è¡Œä¸‹ç§»è°ƒæ•´ï¼Œä¸å½±å“å…¶ä»–å…ƒç´  */
    .typo-image-container .card-image {
      transform: translateY(6px);
    }

    /* ä¿®æ”¹æ¨ªçº¿è¿æ¥å™¨æ ·å¼ */
    .typo-connector {
      position: absolute;
      bottom: 55px;
      width: 100%;
      height: 1px;
      background: linear-gradient(
        90deg, 
        transparent 0%, 
        var(--primary-light) 20%, 
        var(--primary) 50%, 
        var(--primary-light) 80%, 
        transparent 100%
      );
      z-index: 1;
    }

    /* è°ƒæ•´æ ‡ç­¾ä½ç½®ï¼Œç¡®ä¿åœ¨æ¨ªçº¿ä¸‹æ–¹ä¸”åœ¨åŒä¸€æ°´å¹³çº¿ */
    .typo-label, .typo-label-right {
      font-size: 22px;
      color: var(--dark-blue);
      margin-top: 65px;
      font-weight: 300;
      font-family: 'Noto Serif SC', serif;
      position: relative;
      z-index: 2;
      background: transparent !important;
      padding: 2px 6px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 20px;
      line-height: 1;
    }

    /* åªä¿®æ”¹æ”¹æ­£æ ‡ç­¾çš„ä¸Šè¾¹è· - ä½¿å…¶æ›´å¾€ä¸Šç§»åŠ¨ */
    .typo-label-right {
      margin-top: 55px;
    }

    /* ç»™æ ‡ç­¾æ·»åŠ æ‹¬å· */
    .typo-label::before {
      content: "ï¼ˆ";
    }
    .typo-label::after {
      content: "ï¼‰";
    }

    .typo-label-right::before {
      content: "ï¼ˆ";
    }
    .typo-label-right::after {
      content: "ï¼‰";
    }

    .sentence-container {
      width: 100%;
      text-align: center;
    }

    .sentence-part {
      margin-bottom: 16px;
    }

    .sentence-label {
      font-size: 15px;
      color: var(--text-secondary);
      margin-bottom: 6px;
      font-weight: 700;
      font-family: 'Noto Serif SC', serif;
    }

    /* é”™åˆ«å­—å’Œç—…å¥ç»Ÿä¸€ä½¿ç”¨æ€æºå®‹ä½“ï¼Œå­—å·ä¸ä¾‹å¥ç›¸åŒ */
    .original-sentence {
      font-size: 22px;
      line-height: 1.5;
      font-family: 'Noto Serif SC', serif;
      color: var(--dark-blue);
      font-weight: 300;
    }

    .corrected-sentence {
      font-size: 22px;
      line-height: 1.5;
      font-family: 'Noto Serif SC', serif;
      color: var(--correct-color);
      font-weight: 300;
    }

    .translation-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }

    .translation-main {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      margin: 16px 0;
      width: 100%;
    }

    /* å¸¸ç”¨æ­é…çš„åæ–‡çŸ­è¯­ - æ€æºå®‹ä½“åŠ ç²— */
    .chinese-text {
      color: var(--primary-dark);
      font-family: 'Noto Serif SC', serif;
      font-weight: 700;
      font-size: 24px;
    }

    .english-text {
      color: var(--dark-blue);
      font-family: Arial, sans-serif;
      font-size: 28px;
      font-weight: 300;
    }

    .english-text-back {
      color: var(--dark-blue);
      font-family: Arial, sans-serif;
      font-size: 28px;
      font-weight: 300;
    }

    .example-container {
      width: 100%;
      text-align: center;
    }

    /* å¸¸ç”¨æ­é…ä¾‹å¥ - æ€æºå­—ä½“300å­—é‡ */
    .example-text {
      font-size: 22px;
      color: var(--dark-blue);
      line-height: 1.5;
      margin-top: 12px;
      font-style: normal;
      font-family: 'Noto Serif SC', serif;
      font-weight: 300;
      padding: 0;
    }

    /* æç¤ºæ–‡å­—ä½¿ç”¨æ€æºå®‹ä½“ï¼Œå­—å·ä¸ä¾‹å¥ç›¸åŒ */
    .sentence-hint {
      font-size: 22px;
      color: var(--dark-blue);
      line-height: 1.4;
      margin-top: 12px;
      font-style: normal;
      font-family: 'Noto Serif SC', serif;
      font-weight: 300;
      padding: 0;
    }

    .example-line {
      display: block;
      margin-bottom: 6px;
    }

    .progress-container {
      width: 100%;
      max-width: 400px;
      margin: 4px 0;
    }

    #progress {
      text-align: center;
      font-size: 15px;
      color: rgba(255, 255, 255, 0.95);
      font-weight: 300;
      margin-bottom: 8px;
      font-family: 'Noto Serif SC', serif;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.25);
      border-radius: 3px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-light) 0%, white 100%);
      border-radius: 3px;
      transition: width 0.8s cubic-bezier(0.22, 0.61, 0.36, 1);
      position: relative;
      overflow: hidden;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.7), transparent);
      animation: shimmer 2.5s infinite;
    }

    @keyframes shimmer {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    .controls {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 10px;
      position: relative;
      margin-top: 8px;
    }

    .btn-row {
      display: flex;
      gap: 8px;
      width: 100%;
      justify-content: center;
    }

    .btn {
      height: 52px;
      min-width: 52px;
      flex: 1;
      font-size: 14px;
      font-weight: 700;
      border: none;
      border-radius: var(--radius-sm);
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(15px);
      color: white;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 
        0 2px 10px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .btn:active {
      transform: translateY(-2px);
      box-shadow: 
        0 4px 15px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
    }

    .btn-icon {
      font-size: 20px;
      transition: var(--transition);
      color: rgba(255, 255, 255, 0.85);
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      background: none !important;
      font-family: system-ui, -apple-system, sans-serif;
    }

    /* ä¸Šä¸€å¼ å’Œä¸‹ä¸€å¼ æŒ‰é’®çš„ç®­å¤´åŠ é•¿ */
    .btn-primary .btn-icon {
      font-size: 22px;
    }

    /* é‡ç½®æŒ‰é’®çš„SVGå›¾æ ‡æ ·å¼ - æ›´åŠ èˆ’å±•çš„è®¾è®¡ */
    .reset-icon-svg {
      width: 24px;
      height: 24px;
      fill: none;
      stroke: rgba(255, 255, 255, 0.85);
      stroke-width: 1.5;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    /* è‡ªåŠ¨æ’­æ”¾æŒ‰é’®çš„ä¸‰è§’å½¢å›¾æ ‡ç¼©å° */
    .auto-play-icon {
      font-size: 14px; /* ä»16pxç¼©å°åˆ°14px */
      letter-spacing: -2px;
    }

    .btn-primary {
      background: rgba(255, 255, 255, 0.12);
    }

    .btn:hover .btn-icon {
      transform: scale(1.1);
    }

    .btn:active .btn-icon {
      transform: scale(0.95);
    }

    .copyright-icon {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 16px;
      z-index: 5;
      cursor: pointer;
      transition: var(--transition);
      padding: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: none;
      border: none;
      box-shadow: none;
      backdrop-filter: none;
      -webkit-backdrop-filter: none;
      width: auto;
      height: auto;
      border-radius: 0;
    }

    .copyright-icon:hover {
      color: rgba(255, 255, 255, 0.9);
      transform: translate(-50%, -50%) scale(1.1);
    }

    .copyright-icon:active {
      transform: translate(-50%, -50%) scale(0.95);
    }

    .creator-info {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
      backdrop-filter: blur(10px);
    }

    .creator-info.active {
      opacity: 1;
      visibility: visible;
    }

    .creator-content {
      padding: 30px;
      border-radius: var(--radius);
      text-align: center;
      box-shadow: var(--shadow-xl);
      max-width: 80%;
      position: relative;
      transform: translateY(20px);
      transition: transform 0.5s ease;
    }

    .creator-info.active .creator-content {
      transform: translateY(0);
    }

    .creator-title {
      font-size: 24px;
      color: white;
      margin-bottom: 20px;
      font-family: 'Noto Serif SC', serif;
    }

    .creator-name {
      font-size: 32px;
      color: white;
      font-weight: bold;
      margin-bottom: 10px;
      font-family: 'Noto Serif SC', serif;
    }

    .creator-quote {
      font-size: 18px;
      color: rgba(255, 255, 255, 0.9);
      font-style: normal;
      margin-top: 20px;
      padding: 15px;
      border-left: 3px solid rgba(255, 255, 255, 0.5);
      background: rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      font-family: 'Noto Serif SC', serif;
      line-height: 1.6;
    }

    .creator-quote-english {
      font-size: 16px;
      color: rgba(255, 255, 255, 0.8);
      font-style: normal;
      margin-top: 8px;
      font-family: 'Arial', sans-serif;
      font-weight: 300;
    }

    .close-creator {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      transition: var(--transition);
    }

    .close-creator:hover {
      transform: scale(1.2);
    }

    /* ç¼©æ”¾æ§åˆ¶æŒ‰é’® */
    .zoom-controls {
      position: fixed;
      bottom: 15px;
      right: 15px;
      display: flex;
      flex-direction: row;
      gap: 2px;
      z-index: 1000;
    }

    .zoom-btn {
      width: 32px;
      height: 32px;
      background: none;
      border: none;
      color: white;
      font-size: 20px;
      font-weight: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .zoom-indicator {
      position: fixed;
      top: 15px;
      right: 15px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 6px 10px;
      border-radius: 16px;
      font-size: 12px;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }

    /* è‡ªåŠ¨æ’­æ”¾æŒ‰é’®æ ·å¼ */
    .btn-auto {
      background: rgba(255, 255, 255, 0.08);
    }

    .btn-auto.active {
      background: rgba(255, 255, 255, 0.35);
      border-color: rgba(255, 255, 255, 0.5);
    }

    .pause-icon {
      font-size: 18px;
      font-weight: 300;
    }

    /* ä¿®æ”¹ä¸‹æ‹‰èœå•æ ·å¼ - æ‰€æœ‰è®¾å¤‡éƒ½æ˜¾ç¤ºä¸ºä¸Šæ‹‰èœå• */
    .dropdown {
      position: fixed;
      backdrop-filter: blur(20px);
      border-radius: var(--radius-sm);
      padding: 8px;
      box-shadow: var(--shadow-xl);
      z-index: 1000;
      border: 1px solid rgba(255, 255, 255, 0.4);
      display: none;
      min-width: 60px;
      width: 60px;
    }

    .dropdown-options {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    /* å“åº”å¼è®¾è®¡ - æ‰‹æœºç«¯ */
    @media (max-width: 480px) {
      .app-container {
        gap: 14px;
      }
      
      .card-container {
        height: 300px;
      }
      
      #card {
        padding: 24px 20px;
      }
      
      #card-text {
        font-size: 24px;
      }
      
      .btn-row {
        gap: 6px;
      }
      
      .btn {
        height: 48px;
        min-width: 48px;
      }
      
      .btn-icon {
        font-size: 18px;
        background: none !important;
      }
      
      .btn-primary .btn-icon {
        font-size: 20px;
      }
      
      .reset-icon-svg {
        width: 20px;
        height: 20px;
      }
      
      .dataset-selector {
        flex-wrap: wrap;
        gap: 6px;
      }
      
      .nav-btn {
        min-width: 100px;
        height: 42px;
        font-size: 18px;
        font-weight: 400;
      }
      
      .correct-character {
        font-size: 70px;
      }
      
      .translation-main {
        font-size: 22px;
      }
      
      .chinese-text {
        font-size: 22px;
      }
      
      .english-text, .english-text-back {
        font-size: 24px;
      }
      
      .typo-back-container {
        gap: 3px;
      }
      
      .vertical-divider {
        margin: 0 6px;
      }
      
      .card-image {
        max-width: 40%;
        max-height: 110px;
      }
      
      /* æ‰‹æœºç«¯é”™åˆ«å­—å›¾ç‰‡è°ƒæ•´ */
      .typo-image-container .card-image {
        transform: translateY(5px);
      }
      
      .original-sentence, .corrected-sentence {
        font-size: 20px;
      }
      
      .logo {
        font-size: 28px;
      }
      
      .copyright-icon {
        font-size: 14px;
      }
      
      .zoom-controls {
        bottom: 10px;
        right: 10px;
      }
      
      .zoom-btn {
        width: 28px;
        height: 28px;
        font-size: 18px;
        font-weight: 100;
      }
      
      .zoom-indicator {
        top: 10px;
        right: 10px;
        font-size: 11px;
        padding: 5px 8px;
      }
      
      .example-text {
        font-size: 20px;
      }
      
      .sentence-hint {
        font-size: 20px;
      }
      
      /* æ‰‹æœºç«¯ - ä¹±åºæŒ‰é’®ç®­å¤´æ”¹ç»† */
      #shuffleBtn .btn-icon {
        font-weight: 300;
        text-shadow: none;
      }
      
      /* æ‰‹æœºç«¯è¿›åº¦æ¡æ•°å­— */
      #progress {
        font-weight: 300;
      }
      
      /* æ‰‹æœºç«¯ä¸‹æ‹‰èœå•å®½åº¦ */
      .dropdown {
        min-width: 55px;
        width: 55px;
      }
      
      /* æ‰‹æœºç«¯è‡ªåŠ¨æ’­æ”¾æŒ‰é’®ä¸‰è§’å½¢ç¼©å° */
      .auto-play-icon {
        font-size: 12px; /* æ‰‹æœºç«¯è¿›ä¸€æ­¥ç¼©å° */
      }
    }

    @media (max-width: 380px) {
      .app-container {
        gap: 12px;
      }
      
      .card-container {
        height: 280px;
      }
      
      .btn {
        height: 44px;
        min-width: 44px;
      }
      
      .btn-icon {
        font-size: 16px;
      }
      
      .btn-primary .btn-icon {
        font-size: 18px;
      }
      
      .reset-icon-svg {
        width: 18px;
        height: 18px;
      }
      
      .logo {
        font-size: 24px;
      }
      
      .nav-btn {
        font-size: 16px;
        font-weight: 400;
      }
      
      /* å°å±å¹•æ‰‹æœºç«¯é”™åˆ«å­—å›¾ç‰‡è°ƒæ•´ */
      .typo-image-container .card-image {
        transform: translateY(4px);
      }
      
      .example-text {
        font-size: 18px;
      }
      
      .sentence-hint {
        font-size: 18px;
      }
      
      /* å°å±å¹•æ‰‹æœºç«¯ - ä¹±åºæŒ‰é’®ç®­å¤´æ”¹ç»† */
      #shuffleBtn .btn-icon {
        font-weight: 300;
        text-shadow: none;
      }
      
      /* å°å±å¹•æ‰‹æœºç«¯ç¼©æ”¾æŒ‰é’® */
      .zoom-btn {
        font-weight: 100;
      }
      
      /* å°å±å¹•æ‰‹æœºç«¯è¿›åº¦æ¡æ•°å­— */
      #progress {
        font-weight: 300;
      }
      
      /* å°å±å¹•æ‰‹æœºç«¯ä¸‹æ‹‰èœå•å®½åº¦ */
      .dropdown {
        min-width: 50px;
        width: 50px;
      }
      
      /* å°å±å¹•æ‰‹æœºç«¯è‡ªåŠ¨æ’­æ”¾æŒ‰é’®ä¸‰è§’å½¢ç¼©å° */
      .auto-play-icon {
        font-size: 11px; /* å°å±å¹•æ‰‹æœºç«¯è¿›ä¸€æ­¥ç¼©å° */
      }
    }

    /* åˆ é™¤ iPad æ¨ªå±å’Œç«–å±ä¼˜åŒ–åª’ä½“æŸ¥è¯¢ï¼Œè¿™æ˜¯å¯¼è‡´é€‚é…ä¸ä¸€è‡´çš„æ ¹æœ¬åŸå›  */
    /* å¤§å±å¹•è®¾å¤‡ä¼˜åŒ– */
    @media (min-width: 1025px) {
      .app-container {
        max-width: 700px;
        padding: 30px 40px;
        gap: 20px;
      }
      
      .header {
        padding: 12px 0;
        margin-bottom: 8px;
      }
      
      .logo {
        font-size: 42px;
        margin-bottom: 8px;
      }
      
      .subtitle {
        font-size: 18px;
      }
      
      .card-container {
        height: 320px;
        margin: 15px 0;
      }
      
      #card {
        padding: 40px 35px;
        border-radius: 28px;
      }
      
      #card-text {
        font-size: 32px;
        padding: 0 16px;
      }
      
      .progress-container {
        margin: 12px 0;
      }
      
      #progress {
        font-size: 18px;
        margin-bottom: 8px;
        font-weight: 300;
      }
      
      .progress-bar {
        height: 8px;
      }
      
      .controls {
        gap: 15px;
        padding: 12px 0;
        margin-top: 15px;
      }
      
      .btn-row {
        gap: 16px;
      }
      
      .btn {
        height: 68px;
        min-width: 90px;
        padding: 0 16px;
        border-radius: 22px;
      }
      
      .btn-icon {
        font-size: 24px;
      }
      
      .btn-primary .btn-icon {
        font-size: 24px;
      }
      
      .reset-icon-svg {
        width: 26px;
        height: 26px;
      }
      
      .zoom-controls {
        bottom: 20px;
        right: 20px;
      }
      
      .zoom-btn {
        width: 40px;
        height: 40px;
        font-size: 24px;
        font-weight: 100;
      }
      
      .zoom-indicator {
        top: 20px;
        right: 20px;
        font-size: 16px;
        padding: 8px 12px;
      }
      
      .example-text {
        font-size: 24px;
      }
      
      .sentence-hint {
        font-size: 24px;
      }
      
      /* ç”µè„‘ç«¯ - ä¹±åºæŒ‰é’®ç®­å¤´æ”¹ç»† */
      #shuffleBtn .btn-icon {
        font-weight: 300;
        text-shadow: none;
      }
      
      /* ç”µè„‘ç«¯å¯¼èˆªæŒ‰é’® */
      .nav-btn {
        font-weight: 400;
      }
      
      /* ç”µè„‘ç«¯è‡ªåŠ¨æ’­æ”¾æŒ‰é’®ä¸‰è§’å½¢ */
      .auto-play-icon {
        font-size: 16px; /* ç”µè„‘ç«¯ä¿æŒç¨å¤§ */
      }
    }
  </style>
</head>
<body>
  <!-- å›ºå®šçš„èƒŒæ™¯å±‚ - é˜²æ­¢ç¼©æ”¾æ—¶å˜ç™½ -->
  <div class="background-fixed"></div>
  
  <!-- ç¼©æ”¾æŒ‡ç¤ºå™¨ -->
  <div class="zoom-indicator" id="zoomIndicator">100%</div>
  
  <!-- ç¼©æ”¾æ§åˆ¶æŒ‰é’® -->
  <div class="zoom-controls">
    <button class="zoom-btn" id="zoomOutBtn">-</button>
    <button class="zoom-btn" id="zoomInBtn">+</button>
  </div>
  
  <!-- è®¾è®¡åˆ¶ä½œä¿¡æ¯å¼¹çª— -->
  <div class="creator-info" id="creatorInfo">
    <div class="creator-content">
      <button class="close-creator" id="closeCreator">Ã—</button>
      <div class="creator-title">è®¾è®¡åˆ¶ä½œ</div>
      <div class="creator-name">åˆ˜è€å¸ˆ Â©</div>
      <div class="creator-quote">
        é”™è¯¯ï¼Œæ˜¯ç²¾è¿›è¡¨è¾¾çš„å¼€å§‹ã€‚
        <div class="creator-quote-english">Mistakes are the starting point for refining expression.</div>
      </div>
    </div>
  </div>
  
  <div class="app-container" id="appContainer">
    <div class="header">
      <div class="header-content">
        <div class="subtitle">ç²¾è¿›è¡¨è¾¾ï¼Œä»è¿™é‡Œå¼€å§‹</div>
        <div class="logo">åæ–‡è¡¨è¾¾ç²¾è¿›å¡</div>
      </div>
    </div>
    
    <div class="dataset-selector">
      <button class="nav-btn active" data-set="collocations">
        <span>å¸¸ç”¨æ­é…</span>
      </button>
      <button class="nav-btn" data-set="typos">
        <span>é”™åˆ«å­—</span>
      </button>
      <button class="nav-btn" data-set="sentences">
        <span>ç—…å¥</span>
      </button>
    </div>
    
    <div class="card-container">
      <div id="card">
        <div class="card-click-left" id="cardLeft"></div>
        <div class="card-click-right" id="cardRight"></div>
        <div id="card-text">ç‚¹å‡»å¡ç‰‡å¼€å§‹å­¦ä¹ </div>
      </div>
    </div>
    
    <div class="progress-container">
      <div id="progress">0 / 0</div>
      <div class="progress-bar">
        <div class="progress-fill" style="width: 0%"></div>
      </div>
    </div>
    
    <div class="controls">
      <div class="copyright-icon" id="copyrightBtn">Â©</div>
      <div class="btn-row">
        <button class="btn" id="resetBtn" title="å›åˆ°ç¬¬ä¸€å¼ ">
          <!-- ä¿®æ”¹åçš„é‡ç½®å›¾æ ‡ - ç«–çº¿ä¸ç¬¬ä¸€ä¸ªä¸‰è§’å½¢é—´è·å¢åŠ  -->
          <svg class="reset-icon-svg" viewBox="0 0 24 24">
            <!-- å·¦è¾¹ç»†ç«–çº¿ -->
            <line x1="4" y1="7" x2="4" y2="17" />
            <!-- ç¬¬ä¸€ä¸ªä¸‰è§’å½¢ - å‘å³ç§»åŠ¨ï¼Œå¢åŠ ä¸ç«–çº¿é—´è· -->
            <polygon points="12,7 12,17 7,12" fill="none" />
            <!-- ç¬¬äºŒä¸ªä¸‰è§’å½¢ -->
            <polygon points="19,7 19,17 14,12" fill="none" />
          </svg>
        </button>
        <button class="btn" id="shuffleBtn" title="éšæœºæ’åº">
          <span class="btn-icon">â‡„</span>
        </button>
        <button class="btn" id="starBtn" title="æ”¶è—">
          <span class="btn-icon">â˜…</span>
        </button>
        <button class="btn" id="bookmarksBtn" title="æŸ¥çœ‹æ”¶è—">
          <span class="btn-icon">ğŸ”–</span>
        </button>
      </div>
      <div class="btn-row">
        <!-- æ·»åŠ è‡ªåŠ¨æ’­æ”¾æŒ‰é’® - ä¸‰è§’å½¢ç¼©å° -->
        <button class="btn btn-auto" id="autoPlayFrontBtn" title="è‡ªåŠ¨æ’­æ”¾æ­£é¢">
          <span class="btn-icon auto-play-icon">â–·</span>
        </button>
        <button class="btn btn-auto" id="autoPlayBothBtn" title="è‡ªåŠ¨æ’­æ”¾æ­£åé¢">
          <span class="btn-icon auto-play-icon">â–·â–·</span>
        </button>
        <button class="btn btn-primary" id="prevBtn" title="ä¸Šä¸€å¼ ">
          <span class="btn-icon">â†</span>
        </button>
        <button class="btn btn-primary" id="nextBtn" title="ä¸‹ä¸€å¼ ">
          <span class="btn-icon">â†’</span>
        </button>
      </div>
    </div>
  </div>

  <!-- å•ç®­å¤´ä¸‹æ‹‰èœå• - ç§»åŠ¨åˆ°bodyçš„ç›´æ¥å­å…ƒç´  -->
  <div class="dropdown" id="speedDropdown">
    <div class="dropdown-options">
      <button class="dropdown-option" data-speed="1000">1<span style="font-size: 10px; opacity: 0.8;">ã€</span></button>
      <button class="dropdown-option" data-speed="2000">2<span style="font-size: 10px; opacity: 0.8;">ã€</span></button>
      <button class="dropdown-option" data-speed="3000">3<span style="font-size: 10px; opacity: 0.8;">ã€</span></button>
      <button class="dropdown-option" data-speed="4000">4<span style="font-size: 10px; opacity: 0.8;">ã€</span></button>
      <button class="dropdown-option" data-speed="5000">5<span style="font-size: 10px; opacity: 0.8;">ã€</span></button>
    </div>
  </div>
  
  <!-- åŒç®­å¤´ä¸‹æ‹‰èœå• - ç§»åŠ¨åˆ°bodyçš„ç›´æ¥å­å…ƒç´  -->
  <div class="dropdown" id="translationDropdown">
    <div class="dropdown-options">
      <button class="dropdown-option" data-front-speed="1000">1<span style="font-size: 10px; opacity: 0.8;">ã€</span></button>
      <button class="dropdown-option" data-front-speed="2000">2<span style="font-size: 10px; opacity: 0.8;">ã€</span></button>
      <button class="dropdown-option" data-front-speed="3000">3<span style="font-size: 10px; opacity: 0.8;">ã€</span></button>
      <button class="dropdown-option" data-front-speed="4000">4<span style="font-size: 10px; opacity: 0.8;">ã€</span></button>
      <button class="dropdown-option" data-front-speed="5000">5<span style="font-size: 10px; opacity: 0.8;">ã€</span></button>
    </div>
  </div>

  <script>
    // å¸¸ç”¨æ­é…æ•°æ® - ä¼˜åŒ–ä¾‹å¥æ’ç‰ˆ
    const collocationsData = [
      ["conduct activities", "å¼€å±•æ´»åŠ¨ | conduct activities\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nå­¦ç”Ÿä¼šè®¡åˆ’ä¸‹å‘¨åœ¨é‚»é‡Œå…¬å›­ï¼Œ\nå¼€å±•ä¸€æ¬¡æ¸…æ´æ´»åŠ¨ã€‚"],
      ["hold a lecture", "ä¸¾åŠè®²åº§ | hold a lecture\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ°‘ä¼—ä¿±ä¹éƒ¨ä¸ºå±…æ°‘ä¸¾åŠäº†\nä¸€ä¸ªå…³äºç½‘ç»œå®‰å…¨çš„è®²åº§ã€‚"],
      ["design a poster", "è®¾è®¡æµ·æŠ¥ | design a poster\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næˆ‘ä»¬çš„åæ–‡åŠŸè¯¾æ˜¯è®¾è®¡æµ·æŠ¥ï¼Œ\nä»‹ç»æ–°åŠ å¡çš„ç¾é£Ÿã€‚"],
      ["distribute flyers", "åˆ†å‘ä¼ å• | distribute flyers\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næˆ‘ä»¬å°†åœ¨åœ°é“ç«™å¤–åˆ†å‘ä¼ å•ï¼Œ\né‚€è¯·å¤§å®¶æ¥å‚åŠ å­¦æ ¡çš„ä¹‰å–ä¼šã€‚"],
      ["take measures", "é‡‡å–æªæ–½ | take measures\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nä¸ºäº†é¢„é˜²éª¨ç—›çƒ­ç—‡ï¼Œå¸‚é•‡ç†äº‹ä¼š\né‡‡å–æªæ–½ï¼Œå®šæœŸæ¸…ç†ç§¯æ°´ã€‚"],
      ["achieve goals", "å®ç°ç›®æ ‡ | achieve goals\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\né€šè¿‡åŠªåŠ›å­¦ä¹ ï¼Œæˆ‘ç»ˆäºå®ç°äº†ç›®æ ‡ï¼Œ\nåœ¨è€ƒè¯•ä¸­å–å¾—äº†å¥½æˆç»©ã€‚"],
      ["learn from mistakes", "å¸å–æ•™è®­ | learn from mistakes\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næˆ‘è¿™æ¬¡æµ‹éªŒå› ä¸ºæ²¡å¤ä¹ è€Œè€ƒå¾—ä¸å¥½ï¼Œ\næˆ‘å¿…é¡»å¸å–æ•™è®­ï¼Œä¸‹æ¬¡è¦æå‰å‡†å¤‡ã€‚"],
      ["summarize experience", "æ€»ç»“ç»éªŒ | summarize experience\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\néœ²è¥æ´»åŠ¨ç»“æŸåï¼Œæˆ‘ä»¬å›´ååœ¨\nä¸€èµ·æ€»ç»“ç»éªŒï¼Œåˆ†äº«å„è‡ªçš„æ”¶è·ã€‚"],
      ["complete a task", "å®Œæˆä»»åŠ¡ | complete a task\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næˆ‘ç»™è‡ªå·±è®¾å®šç›®æ ‡ï¼Œæ¯å¤©éƒ½è¦\nå®Œæˆåæ–‡é˜…è¯»çš„ä»»åŠ¡ã€‚"],
      ["solve problems", "è§£å†³é—®é¢˜ | solve problems\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nå±…æ°‘å¯ä»¥é€šè¿‡å¸‚é•‡ç†äº‹ä¼šï¼Œ\nè§£å†³ä¸€äº›å¸¸è§çš„ç¤¾åŒºé—®é¢˜ã€‚"],
      ["overcome difficulties", "å…‹æœå›°éš¾ | overcome difficulties\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nå­¦ä¹ æ¸¸æ³³æ—¶æˆ‘å¾ˆæ€•æ°´ï¼Œä½†åœ¨æ•™ç»ƒçš„\nè€å¿ƒæŒ‡å¯¼ä¸‹ï¼Œæˆ‘æ…¢æ…¢å…‹æœäº†è¿™ä¸ªå›°éš¾ã€‚"],
      ["realize dreams", "å®ç°æ¢¦æƒ³ | realize dreams\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næˆ‘ç›¸ä¿¡åªè¦åšæŒåŠªåŠ›ï¼Œ\næ¯ä¸ªäººéƒ½æœ‰å¯èƒ½å®ç°è‡ªå·±çš„æ¢¦æƒ³ã€‚"],
      ["develop habits", "å…»æˆä¹ æƒ¯ | develop habits\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ¯å¤©æ™¨è¯»ååˆ†é’Ÿï¼Œ\nèƒ½å¸®åŠ©ä½ å…»æˆé˜…è¯»ä¹ æƒ¯ã€‚"],
      ["cultivate talent", "åŸ¹å…»äººæ‰ | cultivate talent\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ–°åŠ å¡é€šè¿‡ä¼˜è´¨çš„æ•™è‚²ä½“ç³»\næ¥åŸ¹å…»äººæ‰ï¼Œæ¨åŠ¨å›½å®¶è¿›æ­¥ã€‚"],
      ["adopt suggestions", "é‡‡çº³å»ºè®® | adopt suggestions\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nè¿™æ¬¡æˆ‘é‡‡çº³äº†çˆ¶æ¯çš„å»ºè®®ï¼Œ\næå‰å‡†å¤‡è€ƒè¯•ï¼Œæ„Ÿè§‰å‹åŠ›å°äº†å¾ˆå¤šã€‚"],
      ["improve relationships", "æ”¹å–„å…³ç³» | improve relationships\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nè€å¸ˆç»å¸¸å’Œæˆ‘ä»¬èŠå¤©ï¼Œ\nè¿™æœ‰åŠ©äºæ”¹å–„å¸ˆç”Ÿå…³ç³»ã€‚"],
      ["seize opportunities", "æŠŠæ¡æœºä¼š | seize opportunities\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næˆ‘ä»¬åº”è¯¥æŠŠæ¡ä¸­å­¦æ—¶æœŸçš„\næ¯ä¸€ä¸ªå­¦ä¹ æœºä¼šï¼Œä¸ºæœªæ¥åšå¥½å‡†å¤‡ã€‚"],
      ["strong interest", "æµ“åšçš„å…´è¶£ | strong interest\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nçœ‹åè¯­ç”µè§†å‰§è®©æˆ‘å¯¹åæ–‡\näº§ç”Ÿäº†æ›´æµ“åšçš„å…´è¶£ã€‚"],
      ["deep feelings", "æ·±åšçš„æ„Ÿæƒ… | deep feelings\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næˆ‘å’Œæˆ‘çš„å©†å©†æœ‰ç€æ·±åšçš„æ„Ÿæƒ…ï¼Œ\nå¥¹å¸¸å¸¸ç»™æˆ‘è®²å¥¹å¹´è½»æ—¶çš„æ•…äº‹ã€‚"],
      ["precious friendship", "çè´µçš„å‹è°Š | precious friendship\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nå››å¹´çš„ä¸­å­¦ç”Ÿæ´»è®©æˆ‘å’ŒåŒå­¦ä»¬\nå»ºç«‹äº†çè´µçš„å‹è°Šã€‚"],
      ["harmonious relationship", "èæ´½çš„å…³ç³» | harmonious relationship\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næˆ‘ä»¬è¿™æ ‹ç»„å±‹çš„å±…æ°‘å…³ç³»å¾ˆèæ´½ï¼Œ\nç»å¸¸åœ¨æ¥¼ä¸‹ä¸€èµ·èŠå¤©ã€‚"],
      ["solid foundation", "æ‰å®çš„åŸºç¡€ | solid foundation\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nå­¦ä¹ é’¢ç´éœ€è¦æœ‰æ‰å®çš„åŸºç¡€ï¼Œ\næ‰€ä»¥è¦æ¯å¤©ç»ƒä¹ æŒ‡æ³•ã€‚"],
      ["thorough preparation", "å……åˆ†çš„å‡†å¤‡ | thorough preparation\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nç”±äºèµ›å‰åšäº†å……åˆ†çš„å‡†å¤‡ï¼Œ\næˆ‘ä»¬çš„ç¯®çƒé˜Ÿèµ¢å¾—äº†æ¯”èµ›ã€‚"],
      ["valuable experience", "å®è´µçš„ç»éªŒ | valuable experience\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nå‡æœŸåœ¨é¤å…æ‰“å·¥è®©æˆ‘\nç§¯ç´¯äº†å®è´µçš„å·¥ä½œç»éªŒã€‚"]
    ];

    // é”™åˆ«å­—æ•°æ® - ä¿®æ”¹"æ­£ç¡®"ä¸º"æ”¹æ­£"
    const typosData = [
      ["", "æˆ–", "https://i.ibb.co/6JZXrCbk/image.png"],
      ["", "è½", "https://i.ibb.co/fdyyDFny/image.png"],
      ["", "è·", "https://i.ibb.co/TBBMCCbQ/image.png"],
      ["", "è¯•", "https://i.ibb.co/JWw1HykT/shi1.png"],
      ["", "è…»", "https://i.ibb.co/HLqTxN94/ni1.png"],
      ["è¯·åœ¨è¯´ä¸€éã€‚", "åŸå¥ï¼šè¯·åœ¨è¯´ä¸€éã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šè¯·å†è¯´ä¸€é"],
      ["ä»–è·‘çš„å¾ˆå¿«ã€‚", "åŸå¥ï¼šä»–è·‘çš„å¾ˆå¿«ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šä»–è·‘å¾—å¾ˆå¿«"],
      ["è¿™æ˜¯è°åœ°æ‰‹æœºã€‚", "åŸå¥ï¼šè¿™æ˜¯è°åœ°æ‰‹æœºã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šè¿™æ˜¯è°çš„æ‰‹æœº"],
      ["å¤§å®¶åœ¨å¼€å¿ƒå¾—èŠå¤©ã€‚", "åŸå¥ï¼šå¤§å®¶åœ¨å¼€å¿ƒå¾—èŠå¤©ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šå¤§å®¶åœ¨å¼€å¿ƒåœ°èŠå¤©"],
      ["æˆ‘å‘¨æœ«å¾—åŸ¹ä¼´å®¶äººã€‚", "åŸå¥ï¼šæˆ‘å‘¨æœ«å¾—åŸ¹ä¼´å®¶äººã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šæˆ‘å‘¨æœ«å¾—é™ªä¼´å®¶äºº"],
      ["é™ªå…»ä¼˜ç§€çš„äººæ‰ã€‚", "åŸå¥ï¼šé™ªå…»ä¼˜ç§€çš„äººæ‰ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šåŸ¹å…»ä¼˜ç§€çš„äººæ‰"],
      ["å¯¼è‡³ä¸¥é‡çš„åæœã€‚", "åŸå¥ï¼šå¯¼è‡³ä¸¥é‡çš„åæœã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šå¯¼è‡´ä¸¥é‡çš„åæœ"],
      ["åŒè¿‡ä¸æ‡ˆçš„åŠªåŠ›ã€‚", "åŸå¥ï¼šåŒè¿‡ä¸æ‡ˆçš„åŠªåŠ›ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šé€šè¿‡ä¸æ‡ˆçš„åŠªåŠ›"],
      ["ä½ éœ€è¦é©¬ä¸Šåšè§‰å®šã€‚", "åŸå¥ï¼šä½ éœ€è¦é©¬ä¸Šåšè§‰å®šã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šä½ éœ€è¦é©¬ä¸Šåšå†³å®š"],
      ["æˆ‘å› è¯¥æå‰åšäº›å‡†å¤‡ã€‚", "åŸå¥ï¼šæˆ‘å› è¯¥æå‰åšäº›å‡†å¤‡ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šæˆ‘åº”è¯¥æå‰åšäº›å‡†å¤‡"],
      ["æ”¿åºœå°†é‡‡å–æœ‰æ•ˆé”™æ–½ã€‚", "åŸå¥ï¼šæ”¿åºœå°†é‡‡å–æœ‰æ•ˆé”™æ–½ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šæ”¿åºœå°†é‡‡å–æœ‰æ•ˆæªæ–½"],
      ["è¯·æå‡ºä½ çš„å»ºæ„ã€‚", "åŸå¥ï¼šè¯·æå‡ºä½ çš„å»ºæ„ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šè¯·æå‡ºä½ çš„å»ºè®®"],
      ["è¿™é‡Œå¾ˆçƒ­ï¼Œç”±å…¶æ˜¯ä¸­åˆã€‚", "åŸå¥ï¼šè¿™é‡Œå¾ˆçƒ­ï¼Œç”±å…¶æ˜¯ä¸­åˆã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šè¿™é‡Œå¾ˆçƒ­ï¼Œå°¤å…¶æ˜¯ä¸­åˆ"]
    ];

    // ç—…å¥æ•°æ®
    const sentencesData = [
      ["æˆ‘ä¸å¤Ÿé’±ã€‚", "åŸå¥ï¼šæˆ‘ä¸å¤Ÿé’±ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šæˆ‘çš„é’±ä¸å¤Ÿã€‚"],
      ["æˆ‘æœ‰å»è¿‡é‚£ä¸ªåœ°æ–¹ã€‚", "åŸå¥ï¼šæˆ‘æœ‰å»è¿‡é‚£ä¸ªåœ°æ–¹ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šæˆ‘å»è¿‡é‚£ä¸ªåœ°æ–¹ã€‚"],
      ["è¿™ä¸ªæ•…äº‹è®©æˆ‘è§‰å¾—å¾ˆæ„ŸåŠ¨ã€‚", "åŸå¥ï¼šè¿™ä¸ªæ•…äº‹è®©æˆ‘è§‰å¾—å¾ˆæ„ŸåŠ¨ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šè¿™ä¸ªæ•…äº‹ä½¿æˆ‘å¾ˆæ„ŸåŠ¨ã€‚"],
      ["æˆ‘ä¸çŸ¥é“å¦‚æœä»–æ˜å¤©ä¼šæ¥ã€‚", "åŸå¥ï¼šæˆ‘ä¸çŸ¥é“å¦‚æœä»–æ˜å¤©ä¼šæ¥ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šæˆ‘ä¸çŸ¥é“ä»–æ˜å¤©æ˜¯å¦ä¼šæ¥ã€‚"],
      ["æˆ‘ä»¬æ­£åœ¨è®¨è®ºå¦‚æœåº”è¯¥å‚åŠ è¿™ä¸ªæ¯”èµ›ã€‚", "åŸå¥ï¼šæˆ‘ä»¬æ­£åœ¨è®¨è®ºå¦‚æœåº”è¯¥å‚åŠ è¿™ä¸ªæ¯”èµ›ã€‚\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\næ”¹æ­£ï¼šæˆ‘ä»¬æ­£åœ¨è®¨è®ºæ˜¯å¦åº”è¯¥å‚åŠ è¿™ä¸ªæ¯”èµ›ã€‚"]
    ];

    const datasets = {
      collocations: collocationsData,
      typos: typosData,
      sentences: sentencesData
    };

    // ä¸“ä¸šçº§çŠ¶æ€ç®¡ç†
    class AppState {
      constructor() {
        this.currentSet = 'collocations';
        this.cards = [];
        this.currentIndex = 0;
        this.starred = new Set();
        this.isViewingStarred = false;
        this.originalOrder = [];
        this.previousState = null;
        this.zoomLevel = 1;
        this.autoPlay = {
          enabled: false,
          timer: null,
          frontSpeed: 2000,
          backSpeed: 1000,
          mode: 'front',
          isFirstCycle: true
        };
      }
      
      reset() {
        this.currentIndex = 0;
        this.isViewingStarred = false;
        this.previousState = null;
        this.cards = [...this.originalOrder];
        this.autoPlay.isFirstCycle = true;
      }
    }

    const state = new AppState();

    // ä¸“ä¸šçº§è‡ªåŠ¨æ’­æ”¾å¼•æ“
    const autoPlayEngine = {
      timer: null,
      isRunning: false,
      cycleCount: 0,
      
      start(frontSpeed, mode) {
        this.stop();
        console.log(`å¯åŠ¨è‡ªåŠ¨æ’­æ”¾: æ¨¡å¼=${mode}, é€Ÿåº¦=${frontSpeed}ms`);
        
        state.currentIndex = 0;
        updateCard();
        
        state.autoPlay.enabled = true;
        state.autoPlay.frontSpeed = frontSpeed;
        state.autoPlay.mode = mode;
        state.autoPlay.isFirstCycle = true;
        this.cycleCount = 0;
        this.isRunning = true;
        
        setTimeout(() => {
          this.executeCycle();
        }, mode === 'front' ? frontSpeed : 100);
      },
      
      stop() {
        console.log(`åœæ­¢è‡ªåŠ¨æ’­æ”¾`);
        this.isRunning = false;
        if (this.timer) {
          clearTimeout(this.timer);
          this.timer = null;
        }
        state.autoPlay.enabled = false;
        state.autoPlay.isFirstCycle = true;
      },
      
      executeCycle() {
        if (!this.isRunning) return;
        
        const delay = this.calculateDelay();
        
        this.timer = setTimeout(() => {
          if (!this.isRunning) return;
          
          this.performAction();
          this.cycleCount++;
          this.executeCycle();
        }, delay);
      },
      
      calculateDelay() {
        if (state.autoPlay.isFirstCycle) {
          state.autoPlay.isFirstCycle = false;
          return state.autoPlay.mode === 'front' ? state.autoPlay.frontSpeed : state.autoPlay.frontSpeed;
        }
        
        if (state.autoPlay.mode === 'front') {
          return state.autoPlay.frontSpeed;
        } else {
          const currentCard = state.cards[state.currentIndex];
          return currentCard.type === 'front' ? state.autoPlay.frontSpeed : state.autoPlay.backSpeed;
        }
      },
      
      performAction() {
        if (state.autoPlay.mode === 'front') {
          this.handleFrontMode();
        } else {
          this.handleBothMode();
        }
      },
      
      handleFrontMode() {
        this.advanceToNextCard();
        updateCard();
      },
      
      handleBothMode() {
        const currentCard = state.cards[state.currentIndex];
        if (currentCard.type === 'front') {
          // åˆ‡æ¢åˆ°èƒŒé¢
          const nextIndex = (state.currentIndex + 1) % state.cards.length;
          state.currentIndex = nextIndex;
          updateCard();
        } else {
          // åˆ‡æ¢åˆ°ä¸‹ä¸€å¼ å¡ç‰‡çš„æ­£é¢
          this.advanceToNextCard();
          updateCard();
        }
      },
      
      advanceToNextCard() {
        if (state.isViewingStarred && state.starred.size > 0) {
          // åœ¨æ”¶è—æ¨¡å¼ä¸‹ï¼Œæ‰¾åˆ°ä¸‹ä¸€ä¸ªæ”¶è—çš„å¡ç‰‡
          const starredArray = Array.from(state.starred);
          const currentCard = state.cards[state.currentIndex];
          const currentIndexInStarred = starredArray.indexOf(currentCard.index);
          const nextIndexInStarred = (currentIndexInStarred + 1) % starredArray.length;
          
          // æ‰¾åˆ°å¯¹åº”å¡ç‰‡çš„æ­£é¢çš„ç´¢å¼•
          const nextCardIndex = starredArray[nextIndexInStarred];
          const nextCardFrontIndex = state.cards.findIndex(card => 
            card.index === nextCardIndex && card.type === 'front');
          
          state.currentIndex = nextCardFrontIndex >= 0 ? nextCardFrontIndex : 0;
        } else {
          // æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œæ‰¾åˆ°ä¸‹ä¸€å¼ å¡ç‰‡çš„æ­£é¢
          let nextIndex = (state.currentIndex + 1) % state.cards.length;
          while (state.cards[nextIndex].type !== 'front' && nextIndex !== state.currentIndex) {
            nextIndex = (nextIndex + 1) % state.cards.length;
          }
          state.currentIndex = nextIndex;
        }
      }
    };

    // æ„å»ºå¡ç‰‡
    function buildCards(phrases) {
      const cards = [];
      for (let i = 0; i < phrases.length; i++) {
        const phrase = phrases[i];
        if (state.currentSet === 'typos' && phrase.length === 3) {
          cards.push({ 
            text: phrase[0], 
            type: 'front', 
            index: i, 
            imageUrl: phrase[2], 
            correctChar: phrase[1]  // ä¿®å¤è¿™é‡Œçš„è¯­æ³•é”™è¯¯
          });
          cards.push({ 
            text: phrase[1], 
            type: 'back', 
            index: i, 
            imageUrl: phrase[2], 
            correctChar: phrase[1]  // ä¿®å¤è¿™é‡Œçš„è¯­æ³•é”™è¯¯
          });
        } else {
          cards.push({ 
            text: phrase[0], 
            type: 'front', 
            index: i 
          });
          cards.push({ 
            text: phrase[1], 
            type: 'back', 
            index: i 
          });
        }
      }
      return cards;
    }

    // æ‰“ä¹±æ•°ç»„
    function shuffleArray(array) {
      const newArray = [...array];
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }

    // æ›´æ–°å¡ç‰‡æ˜¾ç¤º
    function updateCard() {
      if (state.cards.length === 0) {
        document.getElementById('card-text').textContent = 'æ²¡æœ‰å¯ç”¨å¡ç‰‡';
        document.getElementById('progress').textContent = '0 / 0';
        document.querySelector('.progress-fill').style.width = '0%';
        return;
      }

      const card = state.cards[state.currentIndex];
      const cardElement = document.getElementById('card');
      
      // æ¸…é™¤ä¹‹å‰çš„å…ƒç´ 
      const elementsToRemove = [
        '.card-image',
        '.card-hint',
        '.divider',
        '.correct-character',
        '.sentence-container',
        '.translation-container',
        '.example-container',
        '.typo-back-container',
        '.vertical-divider',
        '.sentence-hint',
        '.typo-label',
        '.typo-label-right',
        '.card-star',
        '.example-label',
        '.typo-connector'
      ];
      
      elementsToRemove.forEach(selector => {
        const element = cardElement.querySelector(selector);
        if (element) element.remove();
      });
      
      // è®¾ç½®å¡ç‰‡å†…å®¹
      if (state.currentSet === 'typos' && card.imageUrl) {
        // é”™åˆ«å­—å›¾ç‰‡å¡ç‰‡å¤„ç†
        if (card.type === 'back') {
          const typoBackContainer = document.createElement('div');
          typoBackContainer.className = 'typo-back-container';
          
          const typoImageContainer = document.createElement('div');
          typoImageContainer.className = 'typo-image-container';
          const img = document.createElement('img');
          img.className = 'card-image';
          img.src = card.imageUrl;
          img.alt = 'é”™åˆ«å­—å›¾ç‰‡';
          typoImageContainer.appendChild(img);
          
          const typoLabelLeft = document.createElement('div');
          typoLabelLeft.className = 'typo-label';
          typoLabelLeft.textContent = 'é”™å­—';
          typoImageContainer.appendChild(typoLabelLeft);
          
          const verticalDivider = document.createElement('div');
          verticalDivider.className = 'vertical-divider';
          
          const typoCharacterContainer = document.createElement('div');
          typoCharacterContainer.className = 'typo-character-container';
          const correctCharElement = document.createElement('div');
          correctCharElement.className = 'correct-character';
          correctCharElement.textContent = card.correctChar;
          correctCharElement.style.fontFamily = "'Noto Serif SC', serif";
          correctCharElement.style.fontWeight = '700';
          typoCharacterContainer.appendChild(correctCharElement);
          
          const typoLabelRight = document.createElement('div');
          typoLabelRight.className = 'typo-label-right';
          typoLabelRight.textContent = 'æ”¹æ­£';
          typoCharacterContainer.appendChild(typoLabelRight);
          
          typoBackContainer.appendChild(typoImageContainer);
          typoBackContainer.appendChild(verticalDivider);
          typoBackContainer.appendChild(typoCharacterContainer);
          
          // æ·»åŠ æ¨ªçº¿è¿æ¥å™¨
          const connector = document.createElement('div');
          connector.className = 'typo-connector';
          typoBackContainer.appendChild(connector);
          
          cardElement.appendChild(typoBackContainer);
          document.getElementById('card-text').textContent = '';
        } else {
          const typoContainer = document.createElement('div');
          typoContainer.className = 'sentence-container';
          
          const img = document.createElement('img');
          img.className = 'card-image';
          img.src = card.imageUrl;
          img.alt = 'é”™åˆ«å­—å›¾ç‰‡';
          typoContainer.appendChild(img);
          
          const divider = document.createElement('div');
          divider.className = 'divider';
          typoContainer.appendChild(divider);
          
          const hintText = document.createElement('div');
          hintText.className = 'sentence-hint';
          hintText.textContent = 'ğŸ’¡ æƒ³ä¸€æƒ³ï¼Œå“ªé‡Œé”™äº†ï¼Ÿ';
          hintText.style.color = 'var(--dark-blue)';
          hintText.style.fontFamily = "'Noto Serif SC', serif";
          hintText.style.fontWeight = '300';
          typoContainer.appendChild(hintText);
          
          cardElement.appendChild(typoContainer);
          document.getElementById('card-text').textContent = '';
        }
      } else if (state.currentSet === 'typos' && !card.imageUrl) {
        // é”™åˆ«å­—æ–‡æœ¬å¡ç‰‡å¤„ç†
        if (card.type === 'back') {
          const parts = card.text.split('\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');
          if (parts.length >= 2) {
            const sentenceContainer = document.createElement('div');
            sentenceContainer.className = 'sentence-container';
            
            const originalPart = document.createElement('div');
            originalPart.className = 'sentence-part';
            const originalText = document.createElement('div');
            originalText.className = 'original-sentence';
            
            const originalSentence = parts[0].replace('åŸå¥ï¼š', '');
            const correctSentence = parts[1].replace('æ”¹æ­£ï¼š', '');
            
            // æ‰¾å‡ºä¸åŒçš„å­—ç¬¦ï¼ˆåˆ«å­—ï¼‰
            let typoChar = '';
            let correctChar = '';
            for (let i = 0; i < Math.min(originalSentence.length, correctSentence.length); i++) {
                if (originalSentence[i] !== correctSentence[i]) {
                    typoChar = originalSentence[i];
                    correctChar = correctSentence[i];
                    break;
                }
            }
            
            const originalLabelSpan = document.createElement('span');
            originalLabelSpan.textContent = 'åŸå¥ï¼š';
            originalLabelSpan.style.fontFamily = "'Noto Serif SC', serif";
            originalLabelSpan.style.fontWeight = '700';
            
            const originalContentSpan = document.createElement('span');
            let displayedOriginal = originalSentence;
            if (typoChar) {
                displayedOriginal = originalSentence.replace(typoChar, 
                    `<span style="color: var(--error-color);">${typoChar}</span>`);
            }
            originalContentSpan.innerHTML = displayedOriginal;
            originalContentSpan.style.fontFamily = "'Noto Serif SC', serif";
            originalContentSpan.style.fontWeight = '300';
            
            originalText.appendChild(originalLabelSpan);
            originalText.appendChild(originalContentSpan);
            originalText.style.color = 'var(--dark-blue)';
            originalPart.appendChild(originalText);
            sentenceContainer.appendChild(originalPart);
            
            const divider = document.createElement('div');
            divider.className = 'divider';
            sentenceContainer.appendChild(divider);
            
            const correctedPart = document.createElement('div');
            correctedPart.className = 'sentence-part';
            const correctedText = document.createElement('div');
            correctedText.className = 'corrected-sentence';
            
            const correctedLabelSpan = document.createElement('span');
            correctedLabelSpan.textContent = 'æ”¹æ­£ï¼š';
            correctedLabelSpan.style.fontFamily = "'Noto Serif SC', serif";
            correctedLabelSpan.style.fontWeight = '700';
            
            const correctedContentSpan = document.createElement('span');
            let displayedCorrected = correctSentence;
            if (correctChar) {
                displayedCorrected = correctSentence.replace(correctChar, 
                    `<span style="color: var(--error-color);">${correctChar}</span>`);
            }
            correctedContentSpan.innerHTML = displayedCorrected;
            correctedContentSpan.style.fontFamily = "'Noto Serif SC', serif";
            correctedContentSpan.style.fontWeight = '300';
            
            correctedText.appendChild(correctedLabelSpan);
            correctedText.appendChild(correctedContentSpan);
            correctedText.style.color = 'var(--dark-blue)';
            correctedPart.appendChild(correctedText);
            sentenceContainer.appendChild(correctedPart);
            
            cardElement.appendChild(sentenceContainer);
            document.getElementById('card-text').textContent = '';
          }
        } else {
          const sentenceContainer = document.createElement('div');
          sentenceContainer.className = 'sentence-container';
          
          const sentence = card.text;
          const firstLine = sentence;
          
          const firstLineElement = document.createElement('div');
          firstLineElement.className = 'original-sentence';
          firstLineElement.textContent = firstLine;
          firstLineElement.style.color = 'var(--dark-blue)';
          firstLineElement.style.fontFamily = "'Noto Serif SC', serif";
          firstLineElement.style.fontSize = '22px';
          sentenceContainer.appendChild(firstLineElement);
          
          const divider = document.createElement('div');
          divider.className = 'divider';
          sentenceContainer.appendChild(divider);
          
          const hintText = document.createElement('div');
          hintText.className = 'sentence-hint';
          hintText.textContent = 'ğŸ’¡ æƒ³ä¸€æƒ³ï¼Œå“ªé‡Œé”™äº†ï¼Ÿ';
          hintText.style.color = 'var(--dark-blue)';
          hintText.style.fontFamily = "'Noto Serif SC', serif";
          hintText.style.fontWeight = '300';
          sentenceContainer.appendChild(hintText);
          
          cardElement.appendChild(sentenceContainer);
          document.getElementById('card-text').textContent = '';
        }
      } else if (state.currentSet === 'sentences') {
        // ç—…å¥å¡ç‰‡å¤„ç†
        if (card.type === 'back') {
          const parts = card.text.split('\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');
          if (parts.length >= 2) {
            const sentenceContainer = document.createElement('div');
            sentenceContainer.className = 'sentence-container';
            
            const originalPart = document.createElement('div');
            originalPart.className = 'sentence-part';
            const originalText = document.createElement('div');
            originalText.className = 'original-sentence';
            originalText.style.color = 'var(--dark-blue)';
            
            const originalContent = parts[0].replace('åŸå¥ï¼š', '');
            
            if (originalContent === "æˆ‘ä»¬æ­£åœ¨è®¨è®ºå¦‚æœåº”è¯¥å‚åŠ è¿™ä¸ªæ¯”èµ›ã€‚") {
              const firstLine = 'æˆ‘ä»¬æ­£åœ¨è®¨è®º';
              const secondLine = 'å¦‚æœåº”è¯¥å‚åŠ è¿™ä¸ªæ¯”èµ›ã€‚';
              
              const originalLabelSpan = document.createElement('span');
              originalLabelSpan.textContent = 'åŸå¥ï¼š';
              originalLabelSpan.style.fontFamily = "'Noto Serif SC', serif";
              originalLabelSpan.style.fontWeight = '700';
              
              const firstLineElement = document.createElement('div');
              firstLineElement.appendChild(originalLabelSpan);
              firstLineElement.appendChild(document.createTextNode(firstLine));
              firstLineElement.style.marginBottom = '5px';
              originalText.appendChild(firstLineElement);
              
              const secondLineElement = document.createElement('div');
              secondLineElement.textContent = secondLine;
              secondLineElement.style.paddingLeft = '3em';
              originalText.appendChild(secondLineElement);
            } else {
              const originalLabelSpan = document.createElement('span');
              originalLabelSpan.textContent = 'åŸå¥ï¼š';
              originalLabelSpan.style.fontFamily = "'Noto Serif SC', serif";
              originalLabelSpan.style.fontWeight = '700';
              
              const originalContentSpan = document.createElement('span');
              originalContentSpan.textContent = originalContent;
              originalContentSpan.style.fontFamily = "'Noto Serif SC', serif";
              originalContentSpan.style.fontWeight = '300';
              
              originalText.appendChild(originalLabelSpan);
              originalText.appendChild(originalContentSpan);
            }
            
            originalPart.appendChild(originalText);
            sentenceContainer.appendChild(originalPart);
            
            const divider = document.createElement('div');
            divider.className = 'divider';
            sentenceContainer.appendChild(divider);
            
            const correctedPart = document.createElement('div');
            correctedPart.className = 'sentence-part';
            const correctedText = document.createElement('div');
            correctedText.className = 'corrected-sentence';
            correctedText.style.color = 'var(--dark-blue)';
            
            const correctedContent = parts[1].replace('æ”¹æ­£ï¼š', '');
            
            if (correctedContent === "æˆ‘ä»¬æ­£åœ¨è®¨è®ºæ˜¯å¦åº”è¯¥å‚åŠ è¿™ä¸ªæ¯”èµ›ã€‚") {
              const firstLine = 'æˆ‘ä»¬æ­£åœ¨è®¨è®º';
              const secondLine = 'æ˜¯å¦åº”è¯¥å‚åŠ è¿™ä¸ªæ¯”èµ›ã€‚';
              
              const correctedLabelSpan = document.createElement('span');
              correctedLabelSpan.textContent = 'æ”¹æ­£ï¼š';
              correctedLabelSpan.style.fontFamily = "'Noto Serif SC', serif";
              correctedLabelSpan.style.fontWeight = '700';
              
              const firstLineElement = document.createElement('div');
              firstLineElement.appendChild(correctedLabelSpan);
              firstLineElement.appendChild(document.createTextNode(firstLine));
              firstLineElement.style.marginBottom = '5px';
              correctedText.appendChild(firstLineElement);
              
              const secondLineElement = document.createElement('div');
              secondLineElement.textContent = secondLine;
              secondLineElement.style.paddingLeft = '3em';
              correctedText.appendChild(secondLineElement);
            } else {
              const correctedLabelSpan = document.createElement('span');
              correctedLabelSpan.textContent = 'æ”¹æ­£ï¼š';
              correctedLabelSpan.style.fontFamily = "'Noto Serif SC', serif";
              correctedLabelSpan.style.fontWeight = '700';
              
              const correctedContentSpan = document.createElement('span');
              correctedContentSpan.textContent = correctedContent;
              correctedContentSpan.style.fontFamily = "'Noto Serif SC', serif";
              correctedContentSpan.style.fontWeight = '300';
              
              correctedText.appendChild(correctedLabelSpan);
              correctedText.appendChild(correctedContentSpan);
            }
            
            correctedPart.appendChild(correctedText);
            sentenceContainer.appendChild(correctedPart);
            
            cardElement.appendChild(sentenceContainer);
            document.getElementById('card-text').textContent = '';
          }
        } else {
          const sentenceContainer = document.createElement('div');
          sentenceContainer.className = 'sentence-container';
          
          const originalText = document.createElement('div');
          originalText.className = 'original-sentence';
          
          if (card.text === "æˆ‘ä»¬æ­£åœ¨è®¨è®ºå¦‚æœåº”è¯¥å‚åŠ è¿™ä¸ªæ¯”èµ›ã€‚") {
            const firstLine = 'æˆ‘ä»¬æ­£åœ¨è®¨è®º';
            const secondLine = 'å¦‚æœåº”è¯¥å‚åŠ è¿™ä¸ªæ¯”èµ›ã€‚';
            
            const firstLineElement = document.createElement('div');
            firstLineElement.textContent = firstLine;
            firstLineElement.style.marginBottom = '5px';
            originalText.appendChild(firstLineElement);
            
            const secondLineElement = document.createElement('div');
            secondLineElement.textContent = secondLine;
            originalText.appendChild(secondLineElement);
          } else {
            originalText.textContent = card.text;
          }
          
          originalText.style.color = 'var(--dark-blue)';
          originalText.style.fontFamily = "'Noto Serif SC', serif";
          originalText.style.fontSize = '22px';
          sentenceContainer.appendChild(originalText);
          
          const divider = document.createElement('div');
          divider.className = 'divider';
          sentenceContainer.appendChild(divider);
          
          const hintText = document.createElement('div');
          hintText.className = 'sentence-hint';
          hintText.textContent = 'ğŸ’¡ æƒ³ä¸€æƒ³ï¼Œå“ªé‡Œé”™äº†ï¼Ÿ';
          hintText.style.color = 'var(--dark-blue)';
          hintText.style.fontFamily = "'Noto Serif SC', serif";
          hintText.style.fontWeight = '300';
          sentenceContainer.appendChild(hintText);
          
          cardElement.appendChild(sentenceContainer);
          document.getElementById('card-text').textContent = '';
        }
      } else if (state.currentSet === 'collocations') {
        // å¸¸ç”¨æ­é…å¡ç‰‡å¤„ç†
        if (card.type === 'back') {
          const parts = card.text.split('\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');
          if (parts.length >= 2) {
            const translationParts = parts[0].split(' | ');
            if (translationParts.length >= 2) {
              const translationContainer = document.createElement('div');
              translationContainer.className = 'translation-container';
              
              const translationMain = document.createElement('div');
              translationMain.className = 'translation-main';
              
              const chineseText = document.createElement('div');
              chineseText.className = 'chinese-text';
              chineseText.textContent = translationParts[0];
              chineseText.style.fontFamily = "'Noto Serif SC', serif";
              chineseText.style.fontWeight = '700';
              translationMain.appendChild(chineseText);
              
              const englishText = document.createElement('div');
              englishText.className = 'english-text-back';
              englishText.textContent = translationParts[1];
              englishText.style.color = 'var(--dark-blue)';
              englishText.style.fontWeight = '300';
              englishText.style.fontFamily = 'Arial, sans-serif';
              translationMain.appendChild(englishText);
              
              translationContainer.appendChild(translationMain);
              
              const divider = document.createElement('div');
              divider.className = 'divider';
              translationContainer.appendChild(divider);
              
              const exampleContainer = document.createElement('div');
              exampleContainer.className = 'example-container';
              
              // ç§»é™¤"ä¾‹å¥ï¼š"æ ‡ç­¾
              const exampleText = document.createElement('div');
              exampleText.className = 'example-text';
              exampleText.style.fontFamily = "'Noto Serif SC', serif";
              exampleText.style.fontWeight = '300';
              exampleText.style.color = 'var(--dark-blue)';
              
              const exampleLines = parts[1].split('\n');
              exampleLines.forEach(line => {
                if (line.trim()) {
                  const exampleLine = document.createElement('span');
                  exampleLine.className = 'example-line';
                  exampleLine.textContent = line;
                  exampleText.appendChild(exampleLine);
                }
              });
              
              exampleContainer.appendChild(exampleText);
              translationContainer.appendChild(exampleContainer);
              cardElement.appendChild(translationContainer);
              document.getElementById('card-text').textContent = '';
            }
          }
        } else {
          const collocationContainer = document.createElement('div');
          collocationContainer.className = 'translation-container';
          
          const englishText = document.createElement('div');
          englishText.className = 'english-text';
          englishText.textContent = card.text;
          englishText.style.color = 'var(--dark-blue)';
          englishText.style.fontSize = '28px';
          englishText.style.fontWeight = '300';
          englishText.style.fontFamily = 'Arial, sans-serif';
          collocationContainer.appendChild(englishText);
          
          const divider = document.createElement('div');
          divider.className = 'divider';
          collocationContainer.appendChild(divider);
          
          const hintText = document.createElement('div');
          hintText.className = 'sentence-hint';
          hintText.textContent = 'ğŸ’¡ æƒ³ä¸€æƒ³ï¼Œåæ–‡æ€æ ·è¯´ï¼Ÿ';
          hintText.style.color = 'var(--dark-blue)';
          hintText.style.fontSize = '22px';
          hintText.style.fontFamily = "'Noto Serif SC', serif";
          hintText.style.fontWeight = '300';
          collocationContainer.appendChild(hintText);
          
          cardElement.appendChild(collocationContainer);
          document.getElementById('card-text').textContent = '';
        }
      } else {
        document.getElementById('card-text').textContent = card.text;
        document.getElementById('card-text').style.color = 'var(--dark-blue)';
        document.getElementById('card-text').style.fontSize = '28px';
        document.getElementById('card-text').style.fontFamily = "'Noto Serif SC', serif";
        document.getElementById('card-text').style.fontWeight = '300';
      }
      
      // å¦‚æœå¡ç‰‡è¢«æ”¶è—ï¼Œæ˜¾ç¤ºæ˜Ÿå·
      if (state.starred.has(card.index)) {
        const starElement = document.createElement('div');
        starElement.className = 'card-star';
        starElement.textContent = 'â˜…';
        cardElement.appendChild(starElement);
      }
      
      // æ›´æ–°è¿›åº¦ - å»æ‰"å¡ç‰‡"ä¸¤ä¸ªå­—
      document.getElementById('progress').textContent = `${state.currentIndex + 1} / ${state.cards.length}`;
      document.querySelector('.progress-fill').style.width = `${((state.currentIndex + 1) / state.cards.length) * 100}%`;
    }

    // ä¸‹ä¸€å¼ å¡ç‰‡
    function nextCard() {
      if (state.cards.length === 0) return;
      state.currentIndex = (state.currentIndex + 1) % state.cards.length;
      updateCard();
    }

    // ä¸Šä¸€å¼ å¡ç‰‡
    function prevCard() {
      if (state.cards.length === 0) return;
      state.currentIndex = (state.currentIndex - 1 + state.cards.length) % state.cards.length;
      updateCard();
    }

    // æ”¶è—/å–æ¶ˆæ”¶è—
    function toggleStar() {
      const currentCard = state.cards[state.currentIndex];
      
      if (state.isViewingStarred) {
        // åœ¨æŸ¥çœ‹æ”¶è—æ¨¡å¼ä¸­ï¼Œç‚¹å‡»æ”¶è—æŒ‰é’®å–æ¶ˆæ•´ä¸ªå¡ç‰‡çš„æ”¶è—ï¼ˆæ­£åä¸¤é¢ï¼‰
        state.starred.delete(currentCard.index);
        
        // ä»å½“å‰æ”¶è—åˆ—è¡¨ä¸­ç§»é™¤è¯¥å¡ç‰‡çš„æ‰€æœ‰é¢
        const cardsToRemove = state.cards.filter(card => card.index === currentCard.index);
        cardsToRemove.forEach(cardToRemove => {
          const indexToRemove = state.cards.findIndex(card => 
            card.index === cardToRemove.index && card.type === cardToRemove.type);
          if (indexToRemove !== -1) {
            state.cards.splice(indexToRemove, 1);
          }
        });
        
        // å¦‚æœç§»é™¤åæ²¡æœ‰å¡ç‰‡äº†ï¼Œå›åˆ°æ­£å¸¸æ¨¡å¼
        if (state.cards.length === 0) {
          state.isViewingStarred = false;
          state.cards = [...state.originalOrder];
          state.currentIndex = 0;
        } else {
          // ç¡®ä¿ç´¢å¼•åœ¨æœ‰æ•ˆèŒƒå›´å†…
          state.currentIndex = state.currentIndex % state.cards.length;
        }
      } else {
        // åœ¨æ­£å¸¸æ¨¡å¼ä¸­ï¼Œç‚¹å‡»æ”¶è—æŒ‰é’®åªèƒ½æ”¶è—ï¼Œä¸èƒ½å–æ¶ˆæ”¶è—
        // åªæœ‰å½“å¡ç‰‡æ²¡æœ‰è¢«æ”¶è—æ—¶ï¼Œæ‰è¿›è¡Œæ”¶è—
        if (!state.starred.has(currentCard.index)) {
          state.starred.add(currentCard.index);
        }
        // å¦‚æœå·²ç»æ”¶è—äº†ï¼Œå°±ä¸åšä»»ä½•æ“ä½œï¼ˆä¸èƒ½å–æ¶ˆæ”¶è—ï¼‰
      }
      updateCard();
    }

    // é‡ç½®åˆ°åŸå§‹é¡ºåº
    function resetCards() {
      state.isViewingStarred = false;
      state.previousState = null;
      state.cards = [...state.originalOrder];
      state.currentIndex = 0;
      updateCard();
    }

    // éšæœºæ’åº
    function shuffleCards() {
      state.isViewingStarred = false;
      state.previousState = null;
      const shuffledPhrases = shuffleArray([...datasets[state.currentSet]]);
      state.cards = buildCards(shuffledPhrases);
      state.currentIndex = 0;
      updateCard();
    }

    // æŸ¥çœ‹æ”¶è—
    function viewStarred() {
      if (state.starred.size === 0) {
        return;
      }
      
      state.previousState = {
        cards: [...state.cards],
        currentIndex: state.currentIndex,
        isViewingStarred: state.isViewingStarred
      };
      
      state.isViewingStarred = true;
      const starredPhrases = [];
      for (let i = 0; i < datasets[state.currentSet].length; i++) {
        if (state.starred.has(i)) {
          starredPhrases.push(datasets[state.currentSet][i]);
        }
      }
      state.cards = buildCards(starredPhrases);
      state.currentIndex = 0;
      updateCard();
    }

    // åˆ‡æ¢æ•°æ®é›†
    function switchDataset(setName) {
      state.currentSet = setName;
      state.isViewingStarred = false;
      state.previousState = null;
      state.cards = buildCards(datasets[setName]);
      state.originalOrder = [...state.cards];
      state.currentIndex = 0;
      
      document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.set === setName);
      });
      
      updateCard();
    }

    // æ˜¾ç¤ºè®¾è®¡åˆ¶ä½œä¿¡æ¯
    function showCreatorInfo() {
      document.getElementById('creatorInfo').classList.add('active');
    }

    // éšè—è®¾è®¡åˆ¶ä½œä¿¡æ¯
    function hideCreatorInfo() {
      document.getElementById('creatorInfo').classList.remove('active');
    }

    // ä¸“ä¸šçº§è‡ªåŠ¨æ’­æ”¾æ§åˆ¶
    function startAutoPlay(frontSpeed, mode) {
      autoPlayEngine.start(frontSpeed, mode);
      updateButtonStates();
      hideAllDropdowns();
    }

    function stopAutoPlay() {
      autoPlayEngine.stop();
      updateButtonStates();
    }

    // UIæ§åˆ¶å‡½æ•° - æ‰€æœ‰è®¾å¤‡éƒ½ä½¿ç”¨ä¸Šæ‹‰èœå•
    function showDropdown(dropdownId, buttonId) {
      const dropdown = document.getElementById(dropdownId);
      const button = document.getElementById(buttonId);
      const rect = button.getBoundingClientRect();
      
      hideAllDropdowns();
      
      dropdown.style.display = 'block';
      
      // è®¡ç®—ä½ç½® - åœ¨æŒ‰é’®æ­£ä¸Šæ–¹æ˜¾ç¤º
      const buttonCenterX = rect.left + rect.width / 2;
      const dropdownWidth = dropdown.offsetWidth;
      
      // è®¡ç®—æ°´å¹³ä½ç½®ï¼ˆå±…ä¸­äºæŒ‰é’®ï¼‰
      const leftPosition = buttonCenterX - dropdownWidth / 2;
      
      // è®¡ç®—å‚ç›´ä½ç½®ï¼ˆåœ¨æŒ‰é’®ä¸Šæ–¹ï¼‰
      const topPosition = rect.top - dropdown.offsetHeight - 10; // 10px é—´è·
      
      // è¾¹ç•Œæ£€æŸ¥ - ç¡®ä¿ä¸ä¼šè¶…å‡ºå±å¹•
      const safeLeft = Math.max(10, Math.min(window.innerWidth - dropdownWidth - 10, leftPosition));
      const safeTop = Math.max(10, topPosition);
      
      // è®¾ç½®ä½ç½®
      dropdown.style.left = safeLeft + 'px';
      dropdown.style.top = safeTop + 'px';
    }

    function hideAllDropdowns() {
      document.getElementById('speedDropdown').style.display = 'none';
      document.getElementById('translationDropdown').style.display = 'none';
    }

    function updateButtonStates() {
      const frontBtn = document.getElementById('autoPlayFrontBtn');
      const bothBtn = document.getElementById('autoPlayBothBtn');
      
      if (state.autoPlay.enabled) {
        if (state.autoPlay.mode === 'front') {
          frontBtn.innerHTML = '<span class="btn-icon pause-icon">âšâš</span>';
          bothBtn.innerHTML = '<span class="btn-icon auto-play-icon">â–·â–·</span>';
          frontBtn.classList.add('active');
          bothBtn.classList.remove('active');
        } else {
          frontBtn.innerHTML = '<span class="btn-icon auto-play-icon">â–·</span>';
          bothBtn.innerHTML = '<span class="btn-icon pause-icon">âšâš</span>';
          frontBtn.classList.remove('active');
          bothBtn.classList.add('active');
        }
      } else {
        frontBtn.innerHTML = '<span class="btn-icon auto-play-icon">â–·</span>';
        bothBtn.innerHTML = '<span class="btn-icon auto-play-icon">â–·â–·</span>';
        frontBtn.classList.remove('active');
        bothBtn.classList.remove('active');
      }
    }

    // å¡ç‰‡ç‚¹å‡»å¤„ç†å‡½æ•°
    function handleCardClick(e) {
      stopAutoPlay();
      
      const card = document.getElementById('card');
      const rect = card.getBoundingClientRect();
      const clickX = e.clientX - rect.left;
      const cardWidth = rect.width;
      
      if (clickX < cardWidth / 2) {
        prevCard();
      } else {
        nextCard();
      }
      
      e.stopPropagation();
    }

    // ç¼©æ”¾åŠŸèƒ½
    function setZoom(level) {
      state.zoomLevel = Math.max(0.5, Math.min(2, level));
      document.getElementById('appContainer').style.transform = `scale(${state.zoomLevel})`;
      document.getElementById('zoomIndicator').textContent = `${Math.round(state.zoomLevel * 100)}%`;
    }

    function zoomIn() {
      setZoom(state.zoomLevel + 0.1);
    }

    function zoomOut() {
      setZoom(state.zoomLevel - 0.1);
    }

    // åˆå§‹åŒ–åº”ç”¨
    function initApp() {
      // åˆå§‹åŒ–æ•°æ®
      state.cards = buildCards(datasets.collocations);
      state.originalOrder = [...state.cards];
      
      // ç»‘å®šäº‹ä»¶
      document.getElementById('nextBtn').addEventListener('click', function() { 
        stopAutoPlay(); 
        nextCard(); 
      });
      
      document.getElementById('prevBtn').addEventListener('click', function() { 
        stopAutoPlay(); 
        prevCard(); 
      });
      
      document.getElementById('starBtn').addEventListener('click', function() { 
        stopAutoPlay(); 
        toggleStar(); 
      });
      
      document.getElementById('resetBtn').addEventListener('click', function() { 
        stopAutoPlay(); 
        resetCards(); 
      });
      
      document.getElementById('shuffleBtn').addEventListener('click', function() { 
        stopAutoPlay(); 
        shuffleCards(); 
      });
      
      document.getElementById('bookmarksBtn').addEventListener('click', function() { 
        stopAutoPlay(); 
        viewStarred(); 
      });
      
      // å¡ç‰‡å·¦å³åˆ†åŒºç‚¹å‡»äº‹ä»¶
      document.getElementById('cardLeft').addEventListener('click', function() { 
        stopAutoPlay(); 
        prevCard(); 
      });
      
      document.getElementById('cardRight').addEventListener('click', function() { 
        stopAutoPlay(); 
        nextCard(); 
      });

      // è‡ªåŠ¨æ’­æ”¾æŒ‰é’®
      document.getElementById('autoPlayFrontBtn').addEventListener('click', function(e) {
        e.stopPropagation();
        if (state.autoPlay.enabled && state.autoPlay.mode === 'front') {
          stopAutoPlay();
        } else {
          showDropdown('speedDropdown', 'autoPlayFrontBtn');
        }
      });

      document.getElementById('autoPlayBothBtn').addEventListener('click', function(e) {
        e.stopPropagation();
        if (state.autoPlay.enabled && state.autoPlay.mode === 'both') {
          stopAutoPlay();
        } else {
          showDropdown('translationDropdown', 'autoPlayBothBtn');
        }
      });

      // ä¸‹æ‹‰èœå•é€‰é¡¹
      document.querySelectorAll('#speedDropdown .dropdown-option').forEach(option => {
        option.addEventListener('click', function(e) {
          e.stopPropagation();
          const speed = parseInt(this.dataset.speed);
          startAutoPlay(speed, 'front');
        });
      });

      document.querySelectorAll('#translationDropdown .dropdown-option').forEach(option => {
        option.addEventListener('click', function(e) {
          e.stopPropagation();
          const frontSpeed = parseInt(this.dataset.frontSpeed);
          startAutoPlay(frontSpeed, 'both');
        });
      });
      
      document.getElementById('closeCreator').addEventListener('click', hideCreatorInfo);
      
      // ç‰ˆæƒå›¾æ ‡ç‚¹å‡»äº‹ä»¶
      document.getElementById('copyrightBtn').addEventListener('click', showCreatorInfo);
      
      // æ•°æ®é›†åˆ‡æ¢
      document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          switchDataset(this.dataset.set);
        });
      });
      
      // ç¼©æ”¾æ§åˆ¶
      document.getElementById('zoomInBtn').addEventListener('click', zoomIn);
      document.getElementById('zoomOutBtn').addEventListener('click', zoomOut);
      
      // å…¨å±€ç‚¹å‡»éšè—ä¸‹æ‹‰èœå•
      document.addEventListener('click', hideAllDropdowns);

      // åŒæŒ‡æåˆç¼©æ”¾
      let initialDistance = 0;
      let initialZoom = 1;
      
      const handleTouchStart = (e) => {
        if (e.touches.length === 2) {
          initialDistance = Math.hypot(
            e.touches[0].clientX - e.touches[1].clientX,
            e.touches[0].clientY - e.touches[1].clientY
          );
          initialZoom = state.zoomLevel;
        }
      };
      
      const handleTouchMove = (e) => {
        if (e.touches.length === 2) {
          const currentDistance = Math.hypot(
            e.touches[0].clientX - e.touches[1].clientX,
            e.touches[0].clientY - e.touches[1].clientY
          );
          
          if (initialDistance > 0) {
            const scale = currentDistance / initialDistance;
            const newZoom = initialZoom * scale;
            setZoom(Math.max(0.5, Math.min(2, newZoom)));
          }
        }
      };
      
      const handleTouchEnd = () => {
        initialDistance = 0;
      };
      
      // åœ¨app-containerä¸Šç›‘å¬è§¦æ‘¸äº‹ä»¶
      const appContainer = document.getElementById('appContainer');
      appContainer.addEventListener('touchstart', handleTouchStart);
      appContainer.addEventListener('touchmove', handleTouchMove);
      appContainer.addEventListener('touchend', handleTouchEnd);
      
      updateCard();
      updateButtonStates();
    }

    // å¯åŠ¨åº”ç”¨
    window.addEventListener('load', initApp);
  </script>
</body>
</html>
